-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
vSERVER = Tunnel.getInterface("register")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARS
-----------------------------------------------------------------------------------------------------------------------------------------
local registers = {
    { 18.8,-1108.23,29.79,147.41,"Sul" }, 
    { 1933.28,3729.17,32.84,204.1,"Sul" },
    { 24.91,-1345.58,29.49,272.13,"Sul" },
    { 24.9,-1347.92,29.49,272.13,"Sul" },
    { 2555.57,381.33,108.61,351.5,"Sul" },
    { 2557.88,381.2,108.61,0.0,"Sul" },
    { 1165.07,-324.50,69.20,127.0,"Sul" },
    { 1164.67,-322.76,69.20,94.0,"Sul" },
    { -706.10,-915.43,19.21,116.0,"Sul" },
    { -706.16,-913.65,19.21,85.0,"Sul" },
    { -47.96,-1759.34,29.42,74.0,"Sul" },
    { -46.80,-1757.94,29.42,45.0,"Sul" },
    { 372.85,325.76,103.56,255.12,"Sul" },
    { 373.32,327.95,103.56,255.12,"Sul" },
    { -3241.58,1000.3,12.82,5.67,"Sul" },
    { -3243.87,1000.54,12.82,0.0,"Sul" },
    { 1727.98,6414.55,35.03,246.62,"Norte" },
    { 1728.95,6416.47,35.03,240.95,"Norte" },
    { 548.56,2671.82,42.16,99.22,"Norte" },
    { 548.83,2669.73,42.16,104.89,"Norte" },
    { 1959.68,3741.59,32.33,297.64,"Norte" },
    { 1960.73,3739.75,32.33,300.48,"Norte" },
    { 2678.83,3279.47,55.23,328.82,"Norte" },
    { 2676.82,3280.53,55.23,328.82,"Norte" },
    { 1696.57,4923.95,42.06,353.0,"Norte" },
    { 1698.06,4922.96,42.06,323.0,"Norte" },
    { -1818.89,792.94,138.08,161.0,"Sul" },
    { -1820.12,794.16,138.08,129.0,"Sul" },
    { 1392.87,3606.39,34.98,195.0,"Norte" },
    { -2966.44,390.89,15.04,84.0,"Sul" },
    { -3038.59,585.1,7.9,14.18,"Sul" },
    { -3040.54,584.46,7.9,19.85,"Sul" },
    { 1134.25,-982.47,46.41,273.0,"Sul" },
    { 1165.93,2710.77,38.15,177.0,"Norte" },
    { -1486.29,-378.02,40.16,132.0,"Sul" },
    { -1221.99,-908.29,12.32,28.0,"Sul" },
    { 81.78,-1388.87,29.37,172.92,"Sul" },
    { 419.29,-810.25,29.49,357.17,"Sul" },
    { -815.82,-1076.92,11.32,119.06,"Sul" },
    { -1198.36,-779.78,17.32,5.67,"Sul" },
    { -1196.75,-778.58,17.32,31.19,"Sul" },
    { -2.32,6514.21,31.88,320.32,"Norte" },
    { 1688.26,4818.03,42.06,2.84,"Norte" },
    { 123.66,-211.14,54.56,209.77,"Sul" },
    { 122.93,-213.09,54.56,255.12,"Sul" },
    { 621.35,2752.04,42.09,53.86,"Norte" },
    { 621.2,2754.12,42.09,87.88,"Norte" },
    { 1200.74,2703.88,38.22,85.04,"Norte" },
    { -3171.9,1056.59,20.86,209.77,"Sul" },
    { -3172.69,1054.62,20.86,243.78,"Sul" },
    { -1094.26,2708.55,19.11,124.73,"Norte" },
    { -821.91,-183.32,37.56,213.0,"Sul" },
    { -709.18,-151.25,37.41,124.73,"Sul" },
    { 136.44,-1709.97,29.28,133.23,"Sul" },
    { -1284.56,-1118.0,6.99,85.04,"Sul" },
    { 1994.34,3723.28,34.93,215.44,"Norte" },
    { 1210.46,-473.07,66.2,70.87,"Sul" },
    { -33.08,-150.51,57.07,340.16,"Sul" },
    { -280.07,6228.84,31.69,42.52,"Norte" },
    { -293.4,6197.58,31.49,331.66,"Norte" },
    { -165.08,-303.2,39.73,257.96,"Sul" },
    { 1325.11,-1652.79,52.27,39.69,"Sul" },
    { -1151.93,-1426.5,4.95,28.35,"Sul" },
    { 321.82,182.7,103.59,164.41,"Sul" },
    { -3172.16,1075.03,20.83,246.62,"Sul" },
    { 1588.88,6457.69,26.02,334.49,"Norte" },
    { 1864.38,3750.14,33.03,127.56,"Norte" },
    { 1595.08,6454.79,26.02,334.49,"Norte" },
    { 161.94,6642.47,31.69,235.28,"Norte" },
    { 160.37,6640.84,31.69,223.94,"Norte" },
    { 812.87,-781.08,26.17,272.13,"Sul" }
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADTARGET
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	for k,v in pairs(registers) do
		exports["target"]:AddCircleZone("Register:"..k,vector3(v[1],v[2],v[3]),1.0,{
			name = "Register:"..k,
			heading = 180.00
		},{
			shop = k,
			distance = 1.0,
			options = {
				{
					event = "register:openSystem",
					label = "Roubar",
					tunnel = "shop"
				}
			}
		})
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REGISTER:OPENSYSTEM
-----------------------------------------------------------------------------------------------------------------------------------------
AddEventHandler("register:openSystem",function(shopId)
	if vSERVER.applyTimers(shopId) then
		SetEntityHeading(ped,registers[shopId][4])
		SetEntityCoords(ped,registers[shopId][1],registers[shopId][2],registers[shopId][3] - 1,1,0,0,0)

		local safeCracking = exports["safecrack"]:safeCraking(1)
		if safeCracking then
			vSERVER.paymentMethod(registers[shopId][5])
		end
	end
end)